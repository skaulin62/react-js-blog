{"ast":null,"code":"import React from\"react\";import styles from\"./Login.module.scss\";import CustomInput from\"../../components/UI/Input/CustomInput\";import{Controller,FormProvider,useForm}from\"react-hook-form\";import{useDispatch,useSelector}from\"react-redux\";import{fetchUser,selectIsAuth}from\"../../Redux/slices/sliceAuth\";import{Formik,useFormik}from\"formik\";import{Navigate,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const dispatch=useDispatch();const isAuth=useSelector(selectIsAuth);if(isAuth){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.login,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign In\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{email:\"skaulin62@gmail.com\",passwordHash:\"1234567\"},validate:values=>{const errors={};if(!values.email){errors.email=\"Email is required\";}else{if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)){errors.email=\"Invalid email address\";}}if(!values.passwordHash){errors.passwordHash=\"Password is required\";}else{if(values.passwordHash.length<5){errors.passwordHash=\"The password must be at least 5.\";}}return errors;},onSubmit:async(values,_ref)=>{let{setSubmitting}=_ref;const data=await dispatch(fetchUser(values));setSubmitting(false);if(\"token\"in(data===null||data===void 0?void 0:data.payload)){window.localStorage.setItem(\"token\",data.payload.token);}else{alert(\"Something is wrong\");}},children:_ref2=>{let{values,errors,handleChange,handleSubmit}=_ref2;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:styles.form,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(CustomInput,{placeholder:\"email\",type:\"text\",name:\"email\",helperText:errors.email,onChange:handleChange,value:values.email,error:Boolean(errors.email)}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(CustomInput,{placeholder:\"password\",type:\"password\",name:\"passwordHash\",helperText:errors.passwordHash,onChange:handleChange,value:values.passwordHash,error:Boolean(errors.passwordHash)}),/*#__PURE__*/_jsx(\"button\",{style:{fontSize:\"18px\",marginTop:\"30px\"},type:\"submit\",className:\"button-reverse\",children:\"Sign In\"})]});}})]});};export default Login;","map":{"version":3,"names":["React","styles","CustomInput","Controller","FormProvider","useForm","useDispatch","useSelector","fetchUser","selectIsAuth","Formik","useFormik","Navigate","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","dispatch","isAuth","to","className","login","children","initialValues","email","passwordHash","validate","values","errors","test","length","onSubmit","_ref","setSubmitting","data","payload","window","localStorage","setItem","token","alert","_ref2","handleChange","handleSubmit","form","placeholder","type","name","helperText","onChange","value","error","Boolean","style","fontSize","marginTop"],"sources":["C:/Users/skaullin62/Desktop/ReactAppsTS/fullstack/frontend/src/pages/Login/Login.jsx"],"sourcesContent":["import React from \"react\";\r\nimport styles from \"./Login.module.scss\";\r\nimport CustomInput from \"../../components/UI/Input/CustomInput\";\r\nimport { Controller, FormProvider, useForm } from \"react-hook-form\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { fetchUser, selectIsAuth } from \"../../Redux/slices/sliceAuth\";\r\nimport { Formik, useFormik } from \"formik\";\r\nimport { Navigate, useNavigate } from \"react-router-dom\";\r\nconst Login = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const isAuth = useSelector(selectIsAuth);\r\n  if (isAuth) {\r\n    return <Navigate to=\"/\" />;\r\n  }\r\n  return (\r\n    <div className={styles.login}>\r\n      <h2>Sign In</h2>\r\n      <Formik\r\n        initialValues={{\r\n          email: \"skaulin62@gmail.com\",\r\n          passwordHash: \"1234567\",\r\n        }}\r\n        validate={(values) => {\r\n          const errors = {};\r\n          if (!values.email) {\r\n            errors.email = \"Email is required\";\r\n          } else {\r\n            if (\r\n              !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)\r\n            ) {\r\n              errors.email = \"Invalid email address\";\r\n            }\r\n          }\r\n\r\n          if (!values.passwordHash) {\r\n            errors.passwordHash = \"Password is required\";\r\n          } else {\r\n            if (values.passwordHash.length < 5) {\r\n              errors.passwordHash = \"The password must be at least 5.\";\r\n            }\r\n          }\r\n\r\n          return errors;\r\n        }}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          const data = await dispatch(fetchUser(values));\r\n          setSubmitting(false);\r\n\r\n          if (\"token\" in data?.payload) {\r\n            window.localStorage.setItem(\"token\", data.payload.token);\r\n          } else {\r\n            alert(\"Something is wrong\");\r\n          }\r\n        }}\r\n      >\r\n        {({ values, errors, handleChange, handleSubmit }) => (\r\n          <form onSubmit={handleSubmit} className={styles.form}>\r\n            <label>Email</label>\r\n            <CustomInput\r\n              placeholder=\"email\"\r\n              type=\"text\"\r\n              name=\"email\"\r\n              helperText={errors.email}\r\n              onChange={handleChange}\r\n              value={values.email}\r\n              error={Boolean(errors.email)}\r\n            />\r\n\r\n            <label>Password</label>\r\n\r\n            <CustomInput\r\n              placeholder=\"password\"\r\n              type=\"password\"\r\n              name=\"passwordHash\"\r\n              helperText={errors.passwordHash}\r\n              onChange={handleChange}\r\n              value={values.passwordHash}\r\n              error={Boolean(errors.passwordHash)}\r\n            />\r\n\r\n            <button\r\n              style={{ fontSize: \"18px\", marginTop: \"30px\" }}\r\n              type=\"submit\"\r\n              className=\"button-reverse\"\r\n            >\r\n              Sign In\r\n            </button>\r\n          </form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}