{"ast":null,"code":"import React from\"react\";import FilterPosts from\"../components/FilterPosts/FilterPosts\";import Post from\"../components/Post/Post\";import SideBar from\"../components/SideBar/SideBar\";import{useDispatch,useSelector}from\"react-redux\";import{fetchComments,fetchPosts,fetchTags}from\"../Redux/slices/slicePosts\";import PostSkeleton from\"../components/Post/PostSkeleton\";import qs from\"qs\";import axios from\"../API/axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const dispatch=useDispatch();const userData=useSelector(state=>state.auth.data);const{posts,tags,comments}=useSelector(state=>state.posts);const isLoadingPost=posts.status===\"loading\";const isLoadingTags=tags.status===\"loading\";const isLoadingComments=comments.status===\"loading\";//sort filter\nconst[sort,setSort]=React.useState({title:\"New\",type:\"createdAt\"});const[filter,setFilter]=React.useState(\"\");React.useEffect(()=>{dispatch(fetchTags());dispatch(fetchComments());},[]);React.useEffect(()=>{dispatch(fetchPosts({sort:sort.type,filter:filter}));},[sort,filter]);const fillPosts=()=>{if(posts.items.length){return(isLoadingPost?[...Array(3)]:posts.items).map((obj,index)=>isLoadingPost?/*#__PURE__*/_jsx(PostSkeleton,{},index):/*#__PURE__*/_jsx(Post,{isOwner:(userData===null||userData===void 0?void 0:userData._id)===obj.user._id,item:obj},index));}else{return/*#__PURE__*/_jsx(\"h1\",{style:{margin:\"55px auto\"},children:\"Not posts\\uD83D\\uDE05\"});}};return/*#__PURE__*/_jsxs(\"section\",{className:\"home\",children:[/*#__PURE__*/_jsx(FilterPosts,{setSort:setSort}),/*#__PURE__*/_jsxs(\"div\",{className:\"home__content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"home__posts\",children:fillPosts()}),/*#__PURE__*/_jsx(SideBar,{setFilter:setFilter,isLoadingTags:isLoadingTags,tags:tags.items,comments:comments.items,isLoadingComments:isLoadingComments})]})]});};export default Home;","map":{"version":3,"names":["React","FilterPosts","Post","SideBar","useDispatch","useSelector","fetchComments","fetchPosts","fetchTags","PostSkeleton","qs","axios","jsx","_jsx","jsxs","_jsxs","Home","dispatch","userData","state","auth","data","posts","tags","comments","isLoadingPost","status","isLoadingTags","isLoadingComments","sort","setSort","useState","title","type","filter","setFilter","useEffect","fillPosts","items","length","Array","map","obj","index","isOwner","_id","user","item","style","margin","children","className"],"sources":["C:/Users/skaullin62/Desktop/ReactAppsTS/fullstack/frontend/src/pages/Home.jsx"],"sourcesContent":["import React from \"react\";\r\nimport FilterPosts from \"../components/FilterPosts/FilterPosts\";\r\nimport Post from \"../components/Post/Post\";\r\nimport SideBar from \"../components/SideBar/SideBar\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  fetchComments,\r\n  fetchPosts,\r\n  fetchTags,\r\n} from \"../Redux/slices/slicePosts\";\r\nimport PostSkeleton from \"../components/Post/PostSkeleton\";\r\n\r\nimport qs from \"qs\";\r\nimport axios from \"../API/axios\";\r\nconst Home = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const userData = useSelector((state) => state.auth.data);\r\n  const { posts, tags, comments } = useSelector((state) => state.posts);\r\n  const isLoadingPost = posts.status === \"loading\";\r\n  const isLoadingTags = tags.status === \"loading\";\r\n  const isLoadingComments = comments.status === \"loading\";\r\n\r\n  //sort filter\r\n  const [sort, setSort] = React.useState({ title: \"New\", type: \"createdAt\" });\r\n  const [filter, setFilter] = React.useState(\"\");\r\n  React.useEffect(() => {\r\n    dispatch(fetchTags());\r\n    dispatch(fetchComments());\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(fetchPosts({ sort: sort.type, filter: filter }));\r\n  }, [sort, filter]);\r\n\r\n  const fillPosts = () => {\r\n    if (posts.items.length) {\r\n      return (isLoadingPost ? [...Array(3)] : posts.items).map((obj, index) =>\r\n        isLoadingPost ? (\r\n          <PostSkeleton key={index} />\r\n        ) : (\r\n          <Post\r\n            key={index}\r\n            isOwner={userData?._id === obj.user._id}\r\n            item={obj}\r\n          />\r\n        )\r\n      );\r\n    } else {\r\n      return <h1 style={{ margin: \"55px auto\" }}>Not postsðŸ˜…</h1>;\r\n    }\r\n  };\r\n  return (\r\n    <section className=\"home\">\r\n      <FilterPosts setSort={setSort} />\r\n      <div className=\"home__content\">\r\n        <div className=\"home__posts\">{fillPosts()}</div>\r\n\r\n        <SideBar\r\n          setFilter={setFilter}\r\n          isLoadingTags={isLoadingTags}\r\n          tags={tags.items}\r\n          comments={comments.items}\r\n          isLoadingComments={isLoadingComments}\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}